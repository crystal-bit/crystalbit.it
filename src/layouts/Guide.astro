---
import SupporterCta from "@components/SupporterCta.astro";
import Base from "../layouts/Base.astro";
import "./guide.css";
import { formatters } from "src/utils/formatters.mjs";
import PageMetadata from "@components/PageMetadata.astro";
import MainContainer from "@components/MainContainer.astro";

const { frontmatter } = Astro.props;

if (!frontmatter) {
  throw new Error("Frontmatter is undefined");
}

const { title, id, draft, creationDate, updateDate, tags, excerpt, thumbnail } =
  frontmatter;
---

<Base>
  <PageMetadata title={title} excerpt={excerpt} />

  <section>
    <MainContainer>
      <!-- header -->
      <h2 class="card-title">
        {title}
      </h2>

      <div class="row" style="padding-top: .5em;">
        <div class="col">
          {tags && tags.map((t) => <span class="badge badge-secondary">{t}</span>)}
        </div>

        <div class="col">
          <p class="text-right small">
            <span class="font-weight-light">Pubblicazione:</span>
            {formatters.date(creationDate)}
            {
              updateDate && (
                <>
                  <br />
                  <span class="font-weight-light">Ultimo aggiornamento:</span>{" "}
                  {formatters.date(updateDate)}
                </>
              )
            }
          </p>
        </div>
      </div>

      <hr />

      <!-- main body -->

      <div class="card-text">
        <slot />
      </div>
    </MainContainer>
  </section>

  <hr />

  <!-- supporter cta -->
  <MainContainer>
    <SupporterCta />
  </MainContainer>
</Base>
